# Linux_cpp_firsttry

[TOC]

https://subingwen.cn/linux/

## 第一章 Linux基础

### 一、初识Linux操作系统

#### 1. Linux介绍

**1.1 Linux诞生**

**Linux** 是 **UNIX 操作系统**的一个**克隆系统**, 但是Linux是**开源的**

Linux 和 GNU 一拍即合，就有了我们现在使用的操作系统，GNU 奠定了 Linux 用户基础和开发环境

**Linux主要特性：**

* Linux 是一个**基于文件**的操作系统

操作系统需要和硬件进行交互，对应 Linux 来说这些硬件都是文件，比如：操作系统会将 硬盘 , 鼠标 , 键盘 , 显示屏等抽象成一个设备文件来进行管理。

* 可以**同时登陆多个**用户，并且每个用户可以同时运行多个应用程序。
* 支持**多平台**（这里指的是基于不同 CPU 架构的平台）

**1.2 名词**

**GNU**：Gnu’s Not Unix

**GPL**：General Public License

**POSIX**：（Portable Operating System Interface for Computing Systems）

**1.3 Linux发行版**

**CentOS**：www.centos.org

CentOS 是一种对 RHEL（Red Hat Enterprise Linux）源代码再编译的产物，由于 Linux 是 开发源代码的操作系统，并不排斥基于源代 码的再分发，CentOS 就是将商业的 Linux 操 作系统 RHEL 进行源代码再编译后分发，并 在 RHEL 的基础上修正了不少已知的漏洞

**Ubuntu**：www.ubuntu.com

优秀易用的桌面环境，基于 Debian 构建。官方每年会发布两个版本，每个版本的版本号由两部分组成: 主版本号 + 副版本号，主版本号为当年年份，长期支持版的年份为偶数，测试版年份为奇数，副版本号为月份，在 4 月份发布的为相对稳定版， 在 10 月份发布的为测试版。

1.4 Linux内核**

Linux 系统从应用角度来看，分为内核空间和用户空间两个部分。

Linux 的内核主要由 5 个子系统组成：进程调度、内存管理、虚拟文件系统、网络接口、进程间通信。下面将依次讲解这 5 个子系统。

* **进程调度SCHED**：进程调度指的是系统对进程的多种状态之间转换的策略。Linux 下的进程调度有 3 种策略：SCHED_OTHER、SCHED_FIFO 和 SCHED_RR。

  * SCHED_OTHER：分时调度策略（默认），是用于针对普通进程的时间片轮转调度策略。
  * SCHED_FIFO：实时调度策略，是针对运行的实时性要求比较高、运行时间短的进程调度策略
  * SCHED_RR：实时调度策略，是针对实时性要求比较高、运行时间比较长的进程调度策略。

* **内存管理MMU**

  * 内存管理是多个进程间的内存共享策略。在 Linux 中，内存管理主要说的是虚拟内存。
  * 虚拟内存可以让进程拥有比实际物理内存更大的内存，可以是实际内存的很多倍。
  * 每个进程的虚拟内存有不同的地址空间，多个进程的虚拟内存不会冲突。

* **虚拟文件系统VFS**

  * 在 Linux 下支持多种文件系统，如 ext、ext2、minix、umsdos、msdos、vfat、ntfs、proc、smb、ncp、iso9660、sysv、hpfs、affs 等。
  * 目前 Linux 下最常用的文件格式是 ext2 和 ext3。

* **网络接口**：Linux 是在 Internet 飞速发展的时期成长起来的，所以 Linux 支持多种网络接口和协议。网络接口分为网络协议和驱动程序，网络协议是一种网络传输的通信标准，而网络驱动则是对硬件设备的驱动程序。Linux 支持的网络设备多种多样，几乎目前所有网络设备都有驱动程序。

* **进程间通信**：Linux 操作系统支持多进程，进程之间需要进行数据的交流才能完成控制、协同工作等功能，Linux 的进程间通信是从 UNIX 系统继承过来的。Linux 下的进程间的通信方式主要有**管道、信号、消息队列、共享内存和套接字**等方法。




#### 2. Linux目录

与 Windows 下的文件组织结构不同，Linux 不使用磁盘分区符号来访问文件系统，而是将**整个文件系统表示成树状的结构**，Linux 系统每增加一个文件系统都会将其加入到这个树中。

操作系统文件结构的开始，只有一个单独的顶级目录结构，叫做根目录。所有一切都**从“根”开始，用“/”代表**，并且延伸到子目录。Linux 则通过 **“挂接” 的方式把所有分区都放置在 “根” 下各个目录里**。一个 Linux 系统的文件结构如下图所示。

**2.1 Linux目录结构**

![](Linux_cpp_firsttry.assets/1563553243830.png)

在 linux 中根目录的子目录结构相对是固定的 (名字固定), 不同的目录功能是也是固定的

* bin: binary, 二进制文件目录，存储了可执行程序，今天要将的命令对应的可执行程序都在这个目录中

* sbin: super binary, root 用户使用的一些二进制可执行程序

* etc: 配置文件目录，系统的或者用户自己安装的应用程序的配置文件都存储在这个目录中

* lib: library, 存储了一些动态库和静态库，给系统或者安装的软件使用

* media: 挂载目录，挂载外部设备，比如：光驱，扫描仪

* mnt: 临时挂载目录，比如我们可以将 U 盘临时挂载到这个目录下

* proc: 内存使用的一个映射目录，给操作系统使用的

* tmp: 临时目录，存放临时数据，重启电脑数据就被自动删除了

* boot: 存储了开机相关的设置

* home: 存储了普通用户的家目录，家目录名和用户名相同

* root: root 用户的家目录

* dev: device , 设备目录，Linux 中一切皆文件，所有的硬件会抽象成文件存储起来，比如：键盘， 鼠标

* lost+found: 一般时候是空的，电脑异常关闭 / 崩溃时用来存储这些无家可归的文件，用于用户系统恢复

* opt: 第三方软件的安装目录

* var: 存储了系统使用的一些经常会发生变化的文件， 比如：日志文件

* usr: unix system resource, 系统的资源目录
  * /usr/bin: 可执行的二进制应用程序
  * /usr/games: 游戏目录
  * /usr/include: 包含的标准头文件目录
  * /usr/local: 和 opt 目录作用相同，安装第三方软件

对于用户自己的文件，一般都是存放到自己的家目录中，也就是 `/home/用户名`里边，通过指定的相应的路径就可以找到这个文件了。关于路径的指定的有两种方式：相对路径和绝对路径。

**2.2 相对路径**

相对路径就是相对于当前文件的路径

* `./`：也可用.表示
* `../`:当前目录的上一层，也可用..表示

**2.3 绝对路径**

* Linux：起始节点为根目录，比如： /root/luffy/get/onepiece
* Windows: 起始节点为某个磁盘的盘符，比如：f:\\\root\\\luffy\\\get\\\onepiece


#### 3.命令解析器

在 Linux 中需要通过终端执行对应的命令来完成某些操作，这些命令都是通过命令解析器解析完成并执行的

**3.1 工作原理**

命令解析器在Linux操作系统中就是一个进程，它的名字叫做`bash`，也就是`shell`（UNIX是shell，bash是Linux中的增强版sh）。

* 在Linux中有一个叫做`PATH`的环境变量，里面存储了一些系统目录

```
#通过echo命令可以查看环境变量PATH中的值
echo $PATH
```

* 命令解析器需要依次搜索`PATH`中的各个目录，检查这些目录中是否有用户输入的指令
  * 如果找到了，执行该目录下的可执行程序，用户输入的命令就被执行完毕了
  * 如果没有找到，继续搜索其他目录，最后还是没有找到，会提示命令找不到，因此无法被执行

**3.2 命令提示行**

在 Linux 终端中，输入要执行的指令之前会有想用的命令提示，我们将其称之为命令提示行

```
[root@VM-8-14-centos ~/luffy/get/onepiece]#
[robin@VM-8-14-centos ~/luffy/get/onepiece]$ 
```

* root : 当前登录的用户的用户名

* @: at -> 在
* VM-8-14-centos: 主机名，在安装这个 linux 操作系统的时候手动指定，可以修改
  * ~: 当前用户的家目录
    * 在 linux 中有很多用户，每个用户都用一个属于自己的目录，这个目录称之为家目录
    * 普通用户家目录 /home/用户名 , root 用户家目录 /root
  * ~/luffy/get/onepiece: 当前用户所在的工作目录，也可以使用 `pwd` 命令查看
  * #: 代表当前用户是 root 用户
  * $: 当前用户是普通用户，也就是说例子中的 robin 是一个普通用户

**3.3 命令行快捷键**

| 快捷键           | 功能                      | 备注                                                         |
| ---------------- | ------------------------- | ------------------------------------------------------------ |
| **Tab**          | 命令自动补齐              | 我们可以连续按两次Tab键，在当前终端中就可以显示出所有匹配成功的shell命令 |
| Ctrl+p           | 显示输入的上一个历史命令  | **↑**                                                        |
| Ctrl+n           | 显示输入的下一个历史命令  | **↓**                                                        |
| Ctrl+a           | 光标移动命命令行首        | **Home**                                                     |
| Ctrl+e           | 光标移动命命令行尾        | **End **                                                     |
| Ctrl+u           | 删除光标前的部分字符串    |                                                              |
| Ctrl+k           | 删除光标后的部分字符串    |                                                              |
| →                | 光标向右移动一个字符      |                                                              |
| ←                | 光标向右移动一个字符      |                                                              |
| Backspace/Delete | 删除光标前 / 后的一个字符 |                                                              |

### 二、常用命名

#### 1.文件管理命令

**cd命令**

* 进入指定目录
* 进入家目录 1. cd 2. cd `~`
  * 普通用户：/home/用户名
  * 管理员：/root
* 在临近的两个目录之间切换  cd -

**ls命令**

```
ls [args] 目录名/文件名
```

* 显示所有文件 `ls -a`
* 显示文件详细信息 `ls -l`

边的信息量还是非常大的，其中包括: **文件类型 , 文件所有者对文件的操作权限 , 文件所属组用户对文件的操作权限 , 其他人对文件的操作权限 , 硬链接计数 , 文件所有者 , 文件所属组 , 文件大小 , 文件的修改日期 , 文件名**

```
robin@OS:~$ ls -l
total 204
-rw-rw-r--  1 robin robin    268 Mar 22 17:32 a.c
drwxrwxr-x  2 robin robin   4096 Aug  4  2019 config
-rw-r--r--  1 robin robin 129487 Dec 25 11:28 english.txt
```

**文件类型**

在 Linux 操作系统中，一共有 7 中文件类型，这 7 中类型是根据文件属性进行划分的，而不是根据文件后缀划分的。

-: 普通的文件，在 Linux 终端中没有执行权限的为白色，压缩包为红色，可执行程序为绿色字体
d: 目录 (directory), 在 Linux 终端中为蓝色字体，如果目录的所有权限都是开放的，有绿色的背景色
l: 软链接文件 (link), 相当于 windows 中的快捷方式，在 Linux 终端中为淡蓝色 (青色) 字体
c: 字符设备 (char), 在 Linux 终端中为黄色字体
b: 块设备 (block), 在 Linux 终端中为黄色字体
p: 管道文件 (pipe), 在 Linux 终端中为棕黄色字体
s: 本地套接字文件 (socket), 在 Linux 终端中为粉色字体

